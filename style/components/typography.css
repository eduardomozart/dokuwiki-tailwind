@layer components {
	.typography {
		// extend the Tailwindcss typography
		@apply
			w-full max-w-none
			prose dark:prose-invert
		;

		h5 {
			@apply font-semibold;
		}

		p {
			@apply first:mt-0;
		}

		// Fix lists
		ul {
			@apply my-2;
		}

		li {
			@apply my-1;

			.li {
				@apply my-0;
			}
		}

		// Underline text
		em.u {
			@apply not-italic underline;
		}

		// Footnotes (in text)
		a.fn_top {
			@apply link-primary scroll-mt-20 no-underline;
		}

		// regular links
		a.wikilink1, a.urlextern, a.mail, a.windows, a.mediafile, a.interwiki {
			@apply link-primary font-inherit;
		}

		// Special links with icons
		a.urlextern, a.mail, a.windows, a.mediafile, a.interwiki {
			@apply py-0 pr-0 pl-[1.4rem] bg-no-repeat bg-left bg-contain;
		}

		// Link icons have the forground #6b7280 (same as gray-500) or #9ca3af (same as gray-400) at dark mode.

		a.urlextern {
			@apply
				bg-[url('/lib/tpl/tailwind/icon.php?icon=link-external&color=gray-500')]
				dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=link-external&color=gray-400')]
			;
		}
		a.mail {
			@apply
				bg-[url('/lib/tpl/tailwind/icon.php?icon=email&color=gray-500')]
				dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=email&color=gray-400')]
			;
		}
		a.windows {
			@apply
				bg-[url('/lib/tpl/tailwind/icon.php?icon=windows-share&color=gray-500')]
				dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=windows-share&color=gray-400')]
			;
		}

		// for "a.mediafile" see the import statement at the top of this file

		a.interwiki {
			&.iw_amazon, &.iw_amazon_de, &.iw_amazon_uk {
				@apply
					bg-[url('/lib/tpl/tailwind/icon.php?icon=amazon&color=gray-500')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=amazon&color=gray-400')]
				;
			}
			&.iw_callto, &.iw_tel {
				@apply
					bg-[url('/lib/tpl/tailwind/icon.php?icon=callto&color=gray-500')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=callto&color=gray-400')]
				;
			}
			&.iw_doku {
				@apply bg-[url('/lib/images/interwiki/doku.svg')];
			}
			&.iw_go, &.iw_google {
				@apply
					bg-[url('/lib/tpl/tailwind/icon.php?icon=google&color=gray-500')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=google&color=gray-400')]
				;
			}
			&.iw_paypal {
				@apply
					bg-[url('/lib/tpl/tailwind/icon.php?icon=paypal&color=gray-500')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=paypal&color=gray-400')]
				;
			}
			&.iw_phpfn {
				@apply
					bg-[url('/lib/tpl/tailwind/icon.php?icon=php&color=gray-500')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=php&color=gray-400')]
				;
			}
			&.iw_rfc {
				@apply
					bg-[url('/lib/tpl/tailwind/icon.php?icon=rfc&color=gray-500')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=rfc&color=gray-400')]
				;
			}
			&.iw_skype {
				@apply
					bg-[url('/lib/tpl/tailwind/icon.php?icon=skype&color=gray-500')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=skype&color=gray-400')]
				;
			}
			&.iw_this {
				@apply
					bg-[url('/lib/tpl/tailwind/icon.php?icon=rss&color=gray-500')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=rss&color=gray-400')]
				;
			}
			&.iw_user {
				@apply
					bg-[url('/lib/tpl/tailwind/icon.php?icon=user&color=gray-500')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=user&color=gray-400')]
				;
			}
			&.iw_man {
				@apply
					bg-[url('/lib/tpl/tailwind/icon.php?icon=cmd&color=gray-500')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=cmd&color=gray-400')]
				;
			}
			&.iw_wp, &.iw_wpde, &.iw_wpes, &.iw_wpfr, &.iw_wpjp, &.iw_wpmeta, &.iw_wppl {
				@apply // icons are gray-900 / gray-100 because the Wikipedia logo is too thin
					bg-[url('/lib/tpl/tailwind/icon.php?icon=wikipedia&color=gray-900')]
					dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=wikipedia&color=gray-100')]
				;
			}
		}

		// dead links
		a.wikilink2 {
			@apply link-error font-inherit;
		}

		// Code
		code {
			@apply p-0.5 rounded text-primary-700 bg-primary-50 dark:text-primary-400 dark:bg-primary-950;
		}

		pre {
			@apply rounded-lg;
		}

		// Fix the margin in downloadable code blocks
		dl.code, dl.file {
			@apply mt-6 mb-7;

			dt {
				@apply
					pl-4 pr-3 py-2.5 flex flex-nowrap items-center justify-between
					rounded-t-lg border-b space-x-4
					bg-gray-800/95 border-gray-700
					dark:bg-gray-950/50 dark:border-gray-800
				;

				> span {
					@apply text-sm font-semibold truncate text-white;
				}

				> a {
					@apply text-gray-200;
				}
			}

			dd {
				@apply p-0 rounded-b-lg;

				pre.code, pre.file {
					@apply m-0 rounded-t-none rounded-b-lg;
				}
			}
		}

		.icon.smiley {
			@apply inline h-[1.2rem] m-0;
		}

		// Footnotes (at the bottom)
		.footnotes {
			a {
				@apply link-primary font-inherit;
			}

			.content {
				@apply inline;
			}
		}

		// Section header
		.section-header {
			@apply flex flex-nowrap items-baseline;

			// Anchor link
			.anchor {
				@apply
					ml-1 no-underline opacity-0 transition-opacity
					text-gray-300 hover:text-gray-400
					dark:text-gray-500 dark:hover:text-gray-400
				;
			}

			// Section edit button
			.secedit {
				@apply ml-auto opacity-0;

				.btn_secedit {
					@apply inline-block;

					button {
						@apply
							bg-no-repeat bg-contain bg-center
							bg-[url('/lib/tpl/tailwind/icon.php?icon=edit&color=gray-300')]
							hover:bg-[url('/lib/tpl/tailwind/icon.php?icon=edit&color=gray-400')]
							dark:bg-[url('/lib/tpl/tailwind/icon.php?icon=edit&color=gray-500')]
							dark:hover:bg-[url('/lib/tpl/tailwind/icon.php?icon=edit&color=gray-400')]
						;

						&:where(h1 *) {
							@apply w-7 h-7;
						}
						&:where(h2 *) {
							@apply w-6 h-6;
						}
						&:where(h3 *) {
							@apply w-5 h-5;
						}
						&:where(h4 *) {
							@apply w-4 h-4;
						}
					}
				}
			}

			// not use the group-features of tailwind because this would not work here
			&:hover {
				.anchor, .secedit {
					@apply opacity-100;
				}
			}
		}

		// footnote popup
		div.insitu-footnote {
			@apply dropdown-container text-sm p-3 w-fit max-w-[40%];
		}
	}

	.typography-p {
		@apply first:mt-0;
	}
}
